<ion-view>
  <ion-nav-title>Departures: {{stop.Name}}</ion-nav-title>
  <ion-nav-buttons side="secondary">
    <button id="like"  ng-class="{'button button-icon icon ion-ios-heart': liked, 'button button-icon icon ion-ios-heart-outline': !liked}" ng-click="liked= !liked; toggleHeart(liked)"></button>
  </ion-nav-buttons>
  <ion-content direction="y" scrollbar-y="false">
    <ion-refresher pulling-text="Pull to refresh..." on-refresh="refresh()"></ion-refresher>
      <ion-list ng-repeat="direction in directions">  
        
            <ion-item class="item-text-wrap" ng-click="toggleGroup({{direction.RouteId}})" ng-class="{active: isGroupShown({{direction.RouteId}})}">
              <div class="row">
                <span class="col" style="font-weight: bold;font-size: 175%; color: #{{routeList[direction.RouteId].Color}};">
                  {{routeList[direction.RouteId].ShortName}}
                </span>
                <span class="col">View upcoming departures for the {{routeList[direction.RouteId].ShortName}}</span>
                <span class="col">
                  <i class="icon" ng-class="isGroupShown({{direction.RouteId}}) ? 'ion-ios-arrow-down' : 'ion-ios-arrow-up'" style="margin-right: 10px;"></i>
                </span>
              </div>
            </ion-item>
              
            <ion-item class="item-accordion"
                            ng-repeat="departure in direction.departures"
                            ng-show="isGroupShown({{direction.RouteId}})" href="#/app/routes/{{direction.RouteId}}">
              <div class="col item-text-wrap" style="font-weight: bold; text-align: center;">
                {{departure.Trip.InternetServiceDesc}}
              </div>
              <div class="row">
                <div class="col-50 item-text-wrap" style="font-weight: light; text-align: center;">
                  Scheduled {{departure.Times.s}}
                </div>
                <div class="col-50 item-text-wrap" style="font-weight: light; text-align: center;">
                  Estimated {{departure.Times.e}}
                </div>
              </div>
            </ion-item>

      </ion-list>
         
     
      <div ng-if="!directions.length">
        <ion-item class="item item-assertive" style="text-align:center">{{stop.Name}} has no departures for at least the next 3 hours.</ion-item>
      </div>
    <div class="bar bar-footer bar-positive">
      <a class="button col-offset-50" ng-click="setCoordinates(stop.Latitude, stop.Longitude)">
        Find on map
      <i class="icon ion-ios-location"></i> 
      </a>
    </div> 
    

  </ion-content>
</ion-view>
